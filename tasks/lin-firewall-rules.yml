- name: "Gather package information"
  ansible.builtin.package_facts:

- ansible.builtin.set_fact:
    has_ufw: "{{ true if (ansible_facts.packages.ufw is defined) else false }}"
    has_firewalld: "{{ true if (ansible_facts.packages.firewalld is defined) else false }}"

- when: has_firewalld
  ansible.builtin.include_tasks: "firewalld-firewall-rules.yml"

- when: has_ufw
  ansible.builtin.include_tasks: "ufw-firewall-rules.yml"
